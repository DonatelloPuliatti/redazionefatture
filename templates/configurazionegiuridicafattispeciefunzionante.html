<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Applicativo per convertire i testi normativi in formule logiche e per configurare automaticamente le fattispecie giuridiche</title>
    <style>
        body { font-family: Arial, sans-serif; background-color: #f4f4f9; color: #333; margin: 0; padding: 0; }
        h2 { text-align: center; color: #4CAF50; margin-top: 20px; }
        form { width: 1250px; max-width: 95%; margin: 20px auto; padding: 20px; border: 1px solid #ccc; border-radius: 10px; background-color: #fff; }
        .row { display: flex; gap: 20px; flex-wrap: wrap; justify-content: space-between; }
        fieldset { flex: 1; min-width: 300px; border: 1px solid #ccc; border-radius: 8px; padding: 15px; background-color: #fdfdfd; margin-bottom: 20px; }
        legend { font-weight: bold; color: #4CAF50; padding: 0 10px; }
        input[type="text"] { width: 100%; padding: 10px; font-size: 1rem; border: 1px solid #ccc; border-radius: 6px; box-sizing: border-box; transition: border-color 0.3s ease-in-out; }
        input[type="text"]:focus { border-color: #4CAF50; outline: none; }
        .radio-group { display: flex; flex-direction: column; gap: 15px; margin-top: 10px; }
        .radio-group label { display: block; margin-bottom: 0; line-height: 1.4; }
        input[type="submit"] { background-color: #4CAF50; color: white; padding: 10px; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; width: 200px; display: block; margin: 20px auto; }
        input[type="submit"]:hover { background-color: #45a049; }
        .result { text-align: center; font-size: 20px; font-weight: bold; margin-top: 20px; color: #4CAF50; }
        .fieldset-container { position: relative; display: inline-block; }
        #altro-container { display: none; margin-top: 10px; }
        #altro-container input { width: 100%; padding: 10px; font-size: 1rem; border: 1px solid #ccc; border-radius: 6px; box-sizing: border-box; transition: border-color 0.3s ease-in-out; }
        #altro-container input:focus { border-color: #4CAF50; outline: none; }
        .errore { color: red; padding: 10px; font-weight: bold; text-align: center; font-size: 1.2em; margin: 20px auto; }
        input[type=number]::-webkit-inner-spin-button, input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
        input[type=number] { -moz-appearance: textfield; }
        .input-field { width: 100%; padding: 10px; font-size: 1rem; border: 1px solid #ccc; border-radius: 6px; box-sizing: border-box; transition: border-color 0.3s ease-in-out; }
        .input-field:focus { border-color: #4CAF50; outline: none; }
        ul.esiti { text-align:left; max-width: 1100px; margin: 10px auto 30px; }
        ul.esiti li { margin: 6px 0; }
    </style>
</head>
<body>

    <h2>Applicativo per convertire i testi normativi in formule logiche e per configurare giuridicamente le fattispecie concrete</h2>

    <form aria-labelledby="intro-title">
        <fieldset>
            <legend id="intro-title">Presentazione</legend>

            <p>Questo applicativo consente di convertire testi normativi in formule logiche e a configurare giuridicamente le fattispecie concrete.</p>
            <p>Selezionando l'opzione 'Conversione di testi normativi in formule logiche', il sistema restituisce:</p>
            <p>1) la struttura logica della fattispecie giuridica astratta inserita in input, attraverso una sequenza di formule del tipo P1, P2...Pn → E1, E2...En, dove le P rappresentano i presupposti e le E gli effetti giuridici;</p>
            <p>2) le corrispondenze dei simboli P1, P2...Pn, E1, E2....En ai presupposti/effetti giuridici</p>
            <p>Selezionando l'opzione 'Configurazione giuridica delle fattispecie concrete', il sistema: </p>
            <p>1) dapprima chiederà quale sia il corpus di norme rispetto al quale effettuare la configurazione giuridica;</p>
            <p>2) successivamente, farà le domande necessarie per acquisire se nella fattispecie concreta sussistano/non sussistano determinati presupposti;</p>
            <p>3) infine, restituirà la configurazione giuridica della fattispecie concreta in base al corpus normativo selezionato in input.</p>
        </fieldset>
    </form>

    <form method="POST" id="form generale">
        <div class="row">
            <fieldset class="fieldset-container">
                <legend id="seleziona">Seleziona l'opzione di tuo interesse</legend>
                <div class="radio-group">
                    <label><input type="radio" name="tipologia" value="conversione" required> Conversione di testi normativi in formule logiche</label>
                    <label><input type="radio" name="tipologia" value="configurazione"> Configurazione giuridica delle fattispecie concrete</label>
                </div>
            </fieldset>
        </div>
        <div class="buttons">
            <input type="submit" name="azione" value="Procedi">
        </div>
    </form>

    {% if selected_option == 'configurazione' and not numeroarticolo_scelto %}
    <form method="POST" id="configurazione">
        <input type="hidden" name="form_id" value="configurazione-selezione-corpus">
        <input type="hidden" name="tipologia" value="configurazione">

        <fieldset>
            <legend>Seleziona un articolo dal corpus normativo</legend>

            {% if articoli_error %}
                <div class="errore">{{ articoli_error }}</div>
            {% endif %}

            <div class="radio-group">
                {% for art in articoli %}
                    <label>
                        <input type="radio" name="numeroarticolo" value="{{ art }}" required>
                        {{ art }}
                    </label>
                {% endfor %}
            </div>
        </fieldset>

        <div class="buttons">
            <input type="submit" name="azione" value="Vai al risultato">
        </div>
    </form>
    {% endif %}

    {% if numeroarticolo_scelto and domande_presupposti %}
    <form method="POST" id="configurazione-domande">
        <input type="hidden" name="form_id" value="configurazione-domande">
        <input type="hidden" name="tipologia" value="configurazione">
        <input type="hidden" name="numeroarticolo" value="{{ numeroarticolo_scelto }}">

        <fieldset>
            <legend>Verifica presupposti — Art. {{ numeroarticolo_scelto }}</legend>
            <div class="radio-group">
                {% for var, domanda in domande_presupposti %}
                    <label>
                        {{ domanda }}<br>
                        <input type="radio" name="presupposto_{{ var }}" value="si" required> Sì
                        <input type="radio" name="presupposto_{{ var }}" value="no" required> No
                    </label>
                {% endfor %}
            </div>
        </fieldset>

        <div class="buttons">
            <input type="submit" name="azione" value="Vai al risultato">
        </div>
    </form>
    {% endif %}

    {% if selected_option == 'conversione' %}
    <form method="POST" id="conversione">
        <input type="hidden" name="form_id" value="conversione">
        <div class="row">
            <fieldset>
                <legend>Inserisci il testo normativo che vuoi convertire</legend>
                <textarea name="testonormativo"
                          placeholder="Inserisci qui il testo normativo"
                          class="input-field"
                          rows="6"
                          required
                          oninvalid="this.setCustomValidity('Campo obbligatorio: inserisci un testo')"
                          oninput="this.setCustomValidity('')"></textarea>
            </fieldset>
        </div>
        <div class="buttons">
            <input type="submit" name="azione" value="Vai all'esito">
        </div>
    </form>
    {% endif %}

    {% if solo_formule %}
    <div class="result">
        <table border="1" style="border-collapse: collapse; width: 100%;">
            <tr>
                <th style="padding: 8px; text-align: left;">Formule logiche</th>
                <th style="padding: 8px; text-align: left;">Dizionario</th>
            </tr>
            <tr>
                <td style="vertical-align: top; padding: 8px;"><pre>{{ solo_formule }}</pre></td>
                <td style="vertical-align: top; padding: 8px;"><pre>{{ solo_dizionario }}</pre></td>
            </tr>
        </table>
    </div>
    {% endif %}

    {% if esiti_messaggi %}
    <div class="result">
        <h4>La fattispecie concreta è stata confrontata con la fattispecie astratta di cui all'{{ numeroarticolo_scelto }}</h4>
        <h4>All'esito di tale confronto, è possibile ritenere che: </h4>
        <ul class="esiti">
            {% for m in esiti_messaggi %}
                <li>{{ m }}</li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}

</body>
</html>






